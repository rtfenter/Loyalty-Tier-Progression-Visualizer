<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Loyalty Tier Progression Visualizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="page-header">
    <div class="page-header-inner">
      <h1>Loyalty Tier Progression Visualizer</h1>
      <p class="tagline">
        Visualize how region, FX, and partner multipliers move a member through loyalty tiers.
      </p>
    </div>
  </header>

  <main class="main">
    <!-- LEFT: INPUT PANEL -->
    <section class="panel panel-input">
      <div class="panel-header">
        <h2>Inputs</h2>
        <div class="panel-actions">
          <button id="load-example" class="btn btn-secondary">Load Example Scenario</button>
        </div>
      </div>

      <p class="help-text">
        Enter the member's qualifying spend, choose a region and partner multiplier, then click
        <strong>Visualize Progress</strong> to see how close they are to each tier.
      </p>

      <div class="field">
        <label for="region">Region</label>
        <select id="region" class="select">
          <option value="US" selected>United States (USD)</option>
          <option value="EU">Europe (EUR)</option>
          <option value="UK">United Kingdom (GBP)</option>
          <option value="JP">Japan (JPY)</option>
        </select>
      </div>

      <div class="field">
        <label for="current-spend">Current Qualifying Spend (local currency, this year)</label>
        <input
          id="current-spend"
          type="number"
          min="0"
          step="0.01"
          placeholder="1500.00"
        />
      </div>

      <div class="field">
        <label for="partner-multiplier">Partner Multiplier (earn boost)</label>
        <select id="partner-multiplier" class="select">
          <option value="1.0" selected>1.0x (no boost)</option>
          <option value="1.25">1.25x</option>
          <option value="1.5">1.5x</option>
          <option value="2.0">2.0x</option>
          <option value="3.0">3.0x</option>
        </select>
      </div>

      <div class="field">
        <label for="extra-spend">Simulated Additional Spend (local currency)</label>
        <input
          id="extra-spend"
          type="number"
          min="0"
          step="0.01"
          placeholder="300.00"
        />
        <p class="help-text">
          Optional: see how a single campaign or partner spend changes tier progress.
        </p>
      </div>

      <div class="panel-footer">
        <button id="visualizeBtn" class="btn btn-primary">Visualize Progress</button>
        <span id="calc-status" class="parse-status" aria-live="polite"></span>
      </div>
    </section>

    <!-- RIGHT: TIER PROGRESSION PANEL -->
    <section class="panel panel-results">
      <div class="panel-header">
        <h2>Tier Progress Overview</h2>
      </div>

      <div id="summary" class="summary">
        <div id="summary-badge" class="summary-badge summary-badge-idle">
          No calculation yet.
        </div>
        <p id="summary-text" class="summary-text">
          Enter a scenario on the left to see where this member sits within the tier structure.
        </p>
      </div>

      <div class="points-grid">
        <div class="points-card">
          <h3>Normalized Progress</h3>
          <p id="normalized-line" class="points-line muted">
            Normalized spend will appear here after you run a scenario.
          </p>
        </div>

        <div class="points-card">
          <h3>Next Tier Gap</h3>
          <p id="gap-line" class="points-line muted">
            We'll show how much more is needed to reach the next tier.
          </p>
        </div>

        <div class="points-card">
          <h3>Multiplier Effect</h3>
          <p id="multiplier-line" class="points-line muted">
            Partner boosts will be translated into effective status progress.
          </p>
        </div>
      </div>

      <div class="tier-ladder">
        <h3 class="ladder-heading">Tier Ladder (normalized to base currency)</h3>

        <div class="tier-row" data-tier-index="0">
          <div class="tier-row-header">
            <span class="tier-label">Member</span>
            <span class="tier-threshold">0 base</span>
          </div>
          <div class="tier-bar">
            <div id="bar-member" class="tier-bar-fill"></div>
          </div>
        </div>

        <div class="tier-row" data-tier-index="1">
          <div class="tier-row-header">
            <span class="tier-label">Silver</span>
            <span class="tier-threshold">1,000 base</span>
          </div>
          <div class="tier-bar">
            <div id="bar-silver" class="tier-bar-fill"></div>
          </div>
        </div>

        <div class="tier-row" data-tier-index="2">
          <div class="tier-row-header">
            <span class="tier-label">Gold</span>
            <span class="tier-threshold">2,500 base</span>
          </div>
          <div class="tier-bar">
            <div id="bar-gold" class="tier-bar-fill"></div>
          </div>
        </div>

        <div class="tier-row" data-tier-index="3">
          <div class="tier-row-header">
            <span class="tier-label">Platinum</span>
            <span class="tier-threshold">5,000 base</span>
          </div>
          <div class="tier-bar">
            <div id="bar-platinum" class="tier-bar-fill"></div>
          </div>
        </div>
      </div>

      <div class="raw-output">
        <h3>Scenario Details</h3>
        <pre id="raw-output">No calculation yet.</pre>
      </div>
    </section>
  </main>

  <footer class="page-footer">
    <p>
      Part of the
      <a href="https://github.com/rtfenter/loyalty-series" target="_blank" rel="noreferrer">
        Loyalty Systems Series
      </a>.
    </p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
